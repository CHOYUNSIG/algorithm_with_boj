---
layout: framework
heading: 'Your awesome heading'
subheading: 'Your awesome subheading'
banner:
    image: "/assets/images/banners/home.jpeg"
sidebar: article-menu
---

{%- include views/article.html -%}

<script>
    async function postLoad() {
        var tagData = {};

        await fetch("{{ site.baseurl }}/tag.csv")
        .then(response => response.text())
        .then(data => {
            const rows = data.split('\n');
            for (var i = 0; i < rows.length; i++) {
                const row = rows[i].trim().split(",");
                if (row.length < 4) continue;
                tagData[row[2]] = { full: row[0], tier: row[3], ko: row[1] };
            }
        })
        .catch(error => console.error('Error fetching CSV:', error));

        const posts = {};
        {%- assign posts = site.posts -%}
        {%- for post in posts -%}
        posts["{{ post.tags[-1] }}"] = "{{ post.url }}";
        {%- endfor -%}
        console.log("post loaded below:");
        console.log(Object.keys(posts));

        document.querySelectorAll('pre.mermaid.tag-connection-define').forEach( pre => {
            let newText = pre.innerHTML + "\n\n";
            const tags = new Set(pre.innerHTML.split('#').slice(1).map( word => { return word.split(' ')[0].split('\n')[0] } ));
            tags.forEach( tag => {
                if (!(tag in tagData))
                    return;
                let inner = tagData[tag].ko;
                if (tagData[tag].full in posts)
                    inner = "<span style=\"background-color: red; border-radius: 50%; display:inline-block; width:28px; height:28px\">fa:fa-code</span> <a href=\"{{ site.baseurl }}" + posts[tagData[tag].full] + "\">" + inner + "</a>";
                newText += "#" + tag + "([\"" + inner + "\"]):::" + tagData[tag].tier + "\n";
            });
            newText += "\n\n";
            newText += `
                classDef tier0 fill:#ad5600, color:#fff, stroke:#0000
                classDef tier1 fill:#435f7a, color:#fff, stroke:#0000
                classDef tier2 fill:#ec9a00, color:#fff, stroke:#0000
                classDef tier3 fill:#27e2a4, color:#fff, stroke:#0000
                classDef tier4 fill:#00b4fc, color:#fff, stroke:#0000
                classDef tier5 fill:#ff0062, color:#fff, stroke:#0000
            `;
            pre.innerHTML = newText;
        });
    }

    postLoad();
</script>